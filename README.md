# intelligent-placer
Требуется написать Intelligent Placer, который по поданной фотографии с несколькими предметами на светлой горизонтальной поверхности с многоугольником на белом листе А4 определяет, можно ли поместить эти предметы внутрь многоугольника.
Более точно, Intelligent Placer должен решить, существует ли способ разместить эти предметы в многоугольнике так, чтобы ни один из предметов не выходил за границы многоугольника и к тому же, ни один из этих предметов не накрывал бы собой другие.
В ходе описанного размещения предметов мы не должны использовать области внутри них самих, то есть предметы рассматриваюся как единое целое, без дырок.
# Постановка задачи
### Общие
- На вход Intelligent Placer поступает путь до фотографии (с предметами и прямоугольником)
- Программа отвечает True если предметы помещаются в многоугольник, False иначе.
- Ответ выводится в стандартный поток вывода
### Многоугольник
- Многоугольник должен быть замкнутым и выпуклым. В данном случае, под многоугольником подразумевается лишь замкнутая ломаная, а не вся часть плоскости, ею ограниченная.
- Границы многоугольника должны быть четко видны и нарисованы темным маркером на белом листе бумаги. 
- Толщина линий ломанной не должна быть меньше *1 мм*

### Содержание фотографий
- Предметы должны располагаться вне многоугольника, так, что они не должны пересекаться ни с друг с другом, ни с многоугольником
- 
- Требование к поверхности:
    1. плоская
    2. светлая
    3. горизонтальная
- Объекты могут быть только из заранее определенного множества (определенного в папке *pictures*)
- Один предмет не может присутствовать на фото несколько раз

### Фотометрические
- фотографии должны быть в формате *\*.jpg*
- угол между направлением камеры и перпендикуляром к поверхности должен быть не более *10&deg;*
- расстояние между камерой и поверхностью должно быть таким, чтобы на получившейся фотографии были легко отличимы предметы и видна была граница. Для этого рекомендуется поддерживать данное расстояние не более *0.5 м*
- фотография должны быть снята камерой с штатным объективом либо объективом с фокусным расстоянием, слегка превышающим нормальное. Иными словами, на полученном изображении должна быть обеспечена наиболее естественная перспектива
- на изображении не должно быть длинных теней
- Освещенность должна быть максимально естественная для человеческого глаза.
- фотография резкая, не смазанная
- отсутствие существенного засвета

# План
0. Подготавливаем изображение: переводим его в ч/б.
2. Применим бинаризацию Оцу
3. Среди контуров, таких, что они внутри белые (смотрим по гистограмме), находим максимум по площади. Это и будет многоугольник.
3. Находим предметы
    * используем бинаризацию
    * используем морфологию закрытия/открытия
    * многоугольник убираем
    * находим компоненты связности
4. Для каждой такой компоненты связности находим ее ограничивающую рамку
5. Далее задача сводится к задаче упаковки прямоугольников в многоугольник. 
    * Будем использовать перебор по всевозможным положениям и поворотам масок предметов и многоугольника. Для этого зададим шаг перебора. Для того, чтобы понять, укладывается ли предмет в многоугольник или нет, будем применять логическое И. Если в результате применения этой операции сумма по всем пикселям результата окажется равна нулю, это будет означать то, что предмет поместился.
6. Для оценки работы алгоритма можем использовать метрики. FP, TP, FN, TN, Accuracy, Recall, Precision







# Данные
- [Изображения объектов](pictures)
- [Тесты](tests)
- [Разметка тестов](tests/tests.csv)
- [Описание тестов](tests/description.txt)
